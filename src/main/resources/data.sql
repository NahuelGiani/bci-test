DROP SCHEMA bcidb IF EXISTS;
CREATE SCHEMA bcidb AUTHORIZATION bci;

DROP TABLE "PHONES" IF EXISTS;
CREATE MEMORY TABLE "PHONES"(
    "CITY_CODE" INTEGER,
    "COUNTRY_CODE" INTEGER,
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NUMBER" INTEGER,
    "USER_ID" UUID
);

ALTER TABLE "PHONES" ADD CONSTRAINT "PK_ID_PHONE" PRIMARY KEY("ID");

DROP TABLE "USERS" IF EXISTS;
CREATE MEMORY TABLE "USERS"(
    "IS_ACTIVE" BOOLEAN,
    "CREATED" TIMESTAMP(6) WITH TIME ZONE,
    "LAST_LOGIN" TIMESTAMP(6) WITH TIME ZONE,
    "MODIFIED" TIMESTAMP(6) WITH TIME ZONE,
    "ID" UUID DEFAULT RANDOM_UUID() NOT NULL,
    "TOKEN" CHARACTER VARYING(255),
    "EMAIL" CHARACTER VARYING(50) NOT NULL UNIQUE,
    "NAME" CHARACTER VARYING(50) NOT NULL UNIQUE,
    "PASSWORD" CHARACTER VARYING(255)
);

ALTER TABLE "USERS" ADD CONSTRAINT "PK_ID_USER" PRIMARY KEY("ID");

ALTER TABLE "PHONES" ADD CONSTRAINT "FK_TO_USER_ID" FOREIGN KEY("USER_ID") REFERENCES "USERS"("ID") NOCHECK;
